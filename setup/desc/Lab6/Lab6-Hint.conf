SSH (англ. Secure Shell — «безопасная оболочка») — сетевой протокол прикладного уровня, позволяющий производить удалённое управление операционной системой и туннелирование TCP-соединений (например, для передачи файлов).
SSH или Secure Shell - это протокол безопасного доступа из одного компьютера к другому по сети. У протокола SSH очень много возможностей. Вы можете создавать защищенные соединения между компьютерами, открывать командную строку на удаленном компьютере, запускать графические программы, передавать файлы и организовывать частные сети.
За поддержку протокола SSH в Linux отвечает набор программного обеспечения OpenSSH. Это открытая реализация этого протокола, которая предоставляет все необходимые возможности. В состав пакета OpenSSH входят утилиты для установки соединения, передачи файлов, а также сам ssh сервер.
Для работы по SSH используется одноименная утилита ssh.
Синтаксис утилиты слудющий:
ssh [опции] имя пользователя@сервер [команда]
Возможные опции:
f - перевести ssh в фоновый режим;
g - разрешить удаленным машинам обращаться к локальным портам;
l - имя пользователя в системе;
n - перенаправить стандартный вывод в /dev/null;
p - порт ssh на удаленной машине;
q - не показывать сообщения об ошибках.
В случае отсутствия команды для утилиты, будет выполнено подключение к удаленной машине. Если подключение пройдет успешно, будет осуществлен переход в терминал удаленной машины. Чтобы выйти из терминала удаленной машины, можно ввести команду exit.
Пример пподключения к пользователю root компьютера, имеющего адресс 80.0.0.2:
ssh root@80.0.0.2
После чего необходимо следовать выводимым инструкциям. После будет запрошен пароль от root удаленной машины. Его необходимо ввести. В случае правильного ввода пароля, будет получен доступ к терминалу удаленной машины.
Таким образом можно подключаться не только к root, но и к другим пользователям, существующим в системе.

Но также есть возможность подключения по аутентификационным ключам. Для этого необходимо, чтобы на локальном компьютере создать закрытый и открытый ключ. После чего открытый ключ передать пользователю на удаленный компьютер. После чего будет возможна авторизация без паролей по ключам.
Чтобы настроить автоматическую авторизацию по ключам для двух пользователей необходимо:
На локальной машине войти за необходимого пользователя, после необходимо сгенерировать ключи командой ssh-keygen. В ходе выполнения команды необходимо выбирать все параметры по умолчанию (нажимать enter). После этого будут сгенерированы открытый и закрытый ключи.
Открытый и закрытый ключи хранятся по пути: ~/.ssh/ (~ - путь домашнего каталога пользователя)
Открытый ключ имеет имя: id_rsa.pub
Закрытый ключ имеет имя: id_rsa
Ключ id_rsa.pub необходимо перенести в ~/.ssh/ необходимого пользователя удаленной машины. Это можно сделать самостоятельно путем подключения по ssh, либо с помощью утилиты ssh-copy-id. Для этого необходимо выполнить следуюющую команду:
    ssh-copy-id username@remote_host
, где username - имя пользователя удаленной машины, а remote_host - адрес удаленной машины.
Таким образом, для настройки автоматической авторизации по ключам необходимо:
1. Создать ключи командой ssh-keygen.
2. Отправить публичный ключ на удаленную машину командой ssh-copy-id.

Также достаточно часто на удаленную машину необходимо перенести некоторые файлы. Для этого можно воспользоваться утилитой scp.
Синтаксис утилиты следующий:
    scp опции пользователь1@хост1:файл пользователь2@хост2:файл
В качестве опций может выступать опция -r, которая задает рекурсивное копирование каталогов.
Пример: scp -r /home/sergiy/photos root@182.03.22.12:/root/ или scp /home/sergiy/photos root@182.03.22.12:/root/

Настройки сервера SSH находятся в файле /etc/ssh/sshd_config.
В данном файле указываются настройки сервера. Отметим интересующие нас настройки.

PermitRootLogin <- указывает на возможность подключения по root. Например:
PermitRootLogin no      <- запрещает доступ root;
PermitRootLogin yes     <- разрешает доступ root.

Строкой Port задает порт подключения. По умолчанию используется 22.

PasswordAuthentication <- указывает на возможность аутентификации по паролю.

После изменения файла конфигурации, необходимо перезагрузить службу ssh. Например командой: systemctl restart ssh.


